# KM Extension (知識管理擴充功能)

這是一個 Chrome 擴充功能，用於擷取、管理和匯出網頁中的知識內容，並提供 TTS 朗讀和 AI 摘要功能。

## 功能

1. **知識擷取**: 類似於瀏覽器的"開發者模式"，可以選擇並擷取網頁中特定區塊的文字內容。
2. **知識管理**: 自動將擷取的內容儲存為知識卡片，包含網頁標題、時間和原始連結。
3. **知識匯出**: 可選擇想要匯出的知識卡片，匯出為 TXT 檔案。
4. **TTS 朗讀**: 點擊功能選單中的朗讀選項，可使用 TTS 功能朗讀知識卡片內容。
5. **內容摘要**: 使用 Gemini API 自動產生知識卡片內容的摘要。
6. **自訂設定**: 可設定 Gemini API 金鑰、選擇模型及調整語音速度。

## 安裝方法

1. 下載此專案並解壓縮。
2. 開啟 Chrome 瀏覽器，在網址列輸入 `chrome://extensions/`。
3. 開啟右上角的「開發人員模式」。
4. 點擊「載入未封裝項目」按鈕，選擇此專案的目錄。
5. 擴充功能將會安裝到您的瀏覽器中。

## 使用方法

1. 點擊 Chrome 工具列中的 KM Extension 圖示，開啟側邊欄。
2. 點擊「擷取」按鈕，進入擷取模式。
3. 在網頁中移動滑鼠，選擇要擷取的區塊（會顯示紅色虛線框）。
4. 點擊選取的區塊，完成擷取。擷取的內容將自動儲存為知識卡片。
5. 點擊卡片的功能選單圖示 (⋮)，可執行朗讀、摘要或刪除操作。
6. 點擊右上角的設定圖示 (⚙️)，可設定 Gemini API 金鑰和語音速度。
7. 點擊「匯出」按鈕，選擇要匯出的知識卡片，匯出為 TXT 檔案。

### 專案結構

```
KMExtension/
├── manifest.json                # 擴展程式設定檔
├── src/
│   ├── assets/                  # 圖標和靜態資源
│   ├── css/                     # 樣式表
│   │   └── sidepanel.css        # 側邊欄樣式
│   ├── html/
│   │   └── sidepanel.html       # 側邊欄 HTML
│   └── js/
│       ├── background.js        # 背景腳本
│       ├── content-script.js    # 內容腳本 (擷取功能)
│       ├── database.js          # 資料庫操作
│       └── sidepanel.js         # 側邊欄功能
├── package.json
└── README.md
```

### 技術說明

- **IndexedDB**: 用於本地儲存知識卡片。
- **Chrome Side Panel API**: 用於在瀏覽器右側顯示側邊欄。
- **Chrome Messaging API**: 用於內容腳本和側邊欄之間的通訊。
- **Web Speech API**: 用於實現 TTS 文字朗讀功能。
- **Gemini API**: 使用 Google Gemini 模型生成摘要內容。

## 注意事項

- 擴充功能使用 IndexedDB 儲存知識卡片，資料儲存在本地瀏覽器中。
- 清除瀏覽器資料可能會導致知識卡片遺失。
- 擴充功能僅支援 Chrome 瀏覽器。
- TTS 朗讀功能依賴於瀏覽器的語音合成引擎，不同系統可能有差異。
- 摘要功能需要有效的 Gemini API 金鑰才能使用。
- Gemini API 有使用額度限制，請參考 Google 官方文件。